#############################################
# FastAPI environment variables
#############################################
PROJECT_NAME=fastapi-sqlmodel-alembic
FIRST_SUPERUSER_PASSWORD=admin
FIRST_SUPERUSER_EMAIL=admin@admin.com
ENCRYPT_KEY=UIEhd2CCUoTRt6qNiDWA9mO57IdaLwcefGkDIf9WKFU=
JWT_REFRESH_SECRET_KEY=iYfWj8oCqXcuzFDLuV7RJdeAQYjG7jwhTra9kkFmxQ0T99nu76P_TVtN21eisIqj1VtgvVOBLKXD24CGU4Tv-A
JWT_RESET_SECRET_KEY=s9JVOshell3UZ4frL1hlQ7V9LiLGRGkwYroa2WxcEQLl4BcLXrgmma5fRROXMYa3
BACKEND_CORS_ORIGINS=["*"]
TOKEN_ISSUER=fastapi_rbac
TOKEN_AUDIENCE=fastapi_rbac_users
USER_CHANGED_PASSWORD_DATE=2025-04-20
USERS_OPEN_REGISTRATION=true
FASTAPI_ENV=development

#############################################
# Email settings
#############################################
EMAILS_ENABLED=true
# Development settings (MailHog)
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_TLS=false
# Production settings (to be filled when needed)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-email@example.com
# SMTP_PASSWORD=your-email-password
# SMTP_TLS=true
EMAILS_FROM_EMAIL=info@fastapi-rbac.com
EMAILS_FROM_NAME=FastAPI RBAC

#############################################
# Database Configuration - SQLite (Development)
#############################################
DATABASE_TYPE=sqlite
SQLITE_DB_PATH=app_dev.db

#############################################
# PostgreSQL database environment variables
#############################################
DATABASE_HOST=fastapi_rbac_db
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=fastapi_db
DATABASE_CELERY_NAME=celery_schedule_jobs
DATABASE_PORT=5432

#############################################
# Redis variables
#############################################
# Updated to match the service name in docker-compose
REDIS_HOST=fastapi_rbac_redis_server
REDIS_PORT=6379

#############################################
# Celery Configuration
#############################################
# Broker and Backend URLs (Redis)
CELERY_BROKER_URL=redis://${REDIS_HOST}:${REDIS_PORT}/0
CELERY_RESULT_BACKEND=redis://${REDIS_HOST}:${REDIS_PORT}/0

# Serialization Settings
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=UTC

# Task Execution Settings
CELERY_TASK_TIME_LIMIT=300  # 5 minutes
CELERY_TASK_SOFT_TIME_LIMIT=60  # 1 minute
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_ALWAYS_EAGER=false  # Set to true in development
CELERY_TASK_EAGER_PROPAGATES=false

# Beat Settings
CELERY_BEAT_SCHEDULER=django_celery_beat.schedulers:DatabaseScheduler
CELERY_BEAT_MAX_LOOP_INTERVAL=5

# Queue Settings
CELERY_TASK_DEFAULT_QUEUE=default
CELERY_TASK_DEFAULT_EXCHANGE=default
CELERY_TASK_DEFAULT_ROUTING_KEY=default

# Error Handling and Retry Settings
CELERY_TASK_ACKS_LATE=true
CELERY_TASK_REJECT_ON_WORKER_LOST=true
CELERY_TASK_DEFAULT_RETRY_DELAY=180
CELERY_TASK_MAX_RETRIES=3

# Monitoring Settings
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_SEND_SENT_EVENT=true
CELERY_WORKER_SEND_TASK_EVENTS=true

# Production Security Settings (uncomment in production)
# CELERY_BROKER_USE_SSL=true
# CELERY_REDIS_BACKEND_USE_SSL=true
# CELERY_TASK_DEFAULT_RATE_LIMIT=10000/m
# CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
